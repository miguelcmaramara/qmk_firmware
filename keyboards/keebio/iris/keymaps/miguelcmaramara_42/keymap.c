#include QMK_KEYBOARD_H

#define _BASE 0
#define _ISSAC 1
#define _TAP 2
#define _NUM 3
#define _SYM 4
#define _NAV 5
#define _STKY 6
#define _META 7

enum custom_keycodes {
    BASE = SAFE_RANGE,
    ISSAC,
    TAP,
    NUM,
    SYM,
    NAV,
    STKY,
    META
};

#ifdef TAPPING_TERM_PER_KEY
uint16_t get_tapping_term(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        // case RSFT_T(KC_J):
        // case LSFT_T(KC_F):
        //     return TAPPING_TERM - 50;
        default:
            return TAPPING_TERM;
    }
}
#endif

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_BASE] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,                                          KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      KC_MINUS,    KC_Q,        KC_W,        KC_E,        KC_R,        KC_T,                                           KC_Y,        KC_U,        KC_I,        KC_O,        KC_P,        KC_EQL,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      KC_ESC,    LGUI_T(KC_A),LALT_T(KC_S),LCTL_T(KC_D),LSFT_T(KC_F),  KC_G,                                           KC_H,      LSFT_T(KC_J),LCTL_T(KC_K),LALT_T(KC_L),LGUI_T(KC_SCLN), KC_QUOT,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      KC_BSLS,     KC_Z,        KC_X,        KC_C,        KC_V,        KC_B,        KC_HOME,              RGB_TOG,     KC_N,        KC_M,        KC_COMM,     KC_DOT,      KC_SLSH,     KC_GRV,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                             LT(_STKY,KC_ESC), KC_TAB,      LT(_NAV,KC_SPC),              LT(_NUM,KC_ENT), LT(_SYM,KC_BSPC), LT(_META,KC_DEL)
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),

  [_ISSAC] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     KC_ESC,  KC_1,    KC_2,    KC_3,    KC_4,    KC_5,                               KC_6,    KC_7,    KC_8,    KC_9,    KC_0,    KC_BSPC,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     KC_TAB,  KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,                               KC_Y,    KC_U,    KC_I,    KC_O,    KC_P,    KC_DEL,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     KC_LCTL, KC_A,    KC_S,    KC_D,    KC_F,    KC_G,                               KC_LEFT, KC_DOWN, KC_UP,   KC_RGHT, KC_SCLN, KC_QUOT,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     KC_LSFT, KC_Z,    KC_X,    KC_C,    KC_V,    KC_B,    KC_HOME,          RGB_TOG, KC_N,    KC_LEFT, KC_DOWN, KC_RGHT, KC_DOT, KC_RSFT,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    KC_LGUI, KC_RALT,  KC_SPC,                    KC_ENT,  KC_BSPC, LT(_META,KC_DEL)
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  ),

  [_TAP] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,                                          KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      KC_MINUS,    KC_Q,        KC_W,        KC_E,        KC_R,        KC_T,                                           KC_Y,        KC_U,        KC_I,        KC_O,        KC_P,        KC_EQL,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      KC_ESC,      KC_A,        KC_S,        KC_D,        KC_F,        KC_G,                                           KC_H,        KC_J,        KC_K,        KC_L,        KC_SCLN,     KC_QUOT,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      KC_BSLS,     KC_Z,        KC_X,        KC_C,        KC_V,        KC_B,        KC_HOME,              RGB_TOG,     KC_N,        KC_M,        KC_COMM,     KC_DOT,      KC_SLSH,     KC_GRV,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                             LT(_STKY,KC_ESC), KC_TAB,      LT(_NAV,KC_SPC),               LT(_NUM,KC_ENT), LT(_SYM,KC_BSPC), LT(_META,KC_DEL)
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),


  [_NUM] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      _______,     _______,     _______,     _______,     _______,     _______,                                        _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_SCLN,     KC_7,        KC_8,        KC_9,        KC_0,                                           RGB_MOD,     RGB_HUI,     RGB_SAI,     RGB_VAI,     RGB_TOG,    _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_LBRC,     KC_4,        KC_5,        KC_6,        KC_RBRC,                                        KC_MPRV, LSFT_T(KC_VOLD),LCTL_T(KC_VOLU),LALT_T(KC_MNXT),LGUI_T(KC_MPLY), _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_GRV,      KC_1,        KC_2,        KC_3,        KC_BSLS,     KC_HOME,              RGB_TOG,     KC_MSTP,     KC_MUTE,     KC_NO,       KC_NO,       KC_NO,       _______,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                                  KC_EQL,      KC_DOT,        KC_MINS,                           KC_NO,       KC_NO,       KC_NO
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),

  [_SYM] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      _______,     _______,     _______,     _______,     _______,     _______,                                        _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_COLN,     KC_AMPR,     KC_ASTR,     KC_LPRN,     KC_RPRN,                                        RGB_MOD,     RGB_HUI,     RGB_SAI,     RGB_VAI,     RGB_TOG,    _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_LCBR,     KC_DLR,      KC_PERC,     KC_CIRC,     KC_RCBR,                                        KC_MPRV, LSFT_T(KC_VOLD),LCTL_T(KC_VOLU),LALT_T(KC_MNXT),LGUI_T(KC_MPLY), _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_TILD,     KC_EXLM,     KC_AT,       KC_HASH,     KC_PIPE,     KC_HOME,              RGB_TOG,     KC_MSTP,     KC_MUTE,     KC_NO,       KC_NO,       KC_NO,       _______,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                                  KC_PLUS,      KC_DOT,      KC_UNDS,                           KC_NO,       KC_NO,       KC_NO
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),

  [_NAV] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      _______,     _______,     _______,     _______,     _______,     _______,                                        _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_F12,      KC_F7,       KC_F8,       KC_F9,       KC_PSCR,                                        KC_AGIN,     KC_PSTE,     KC_COPY,     KC_CUT,      KC_UNDO,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,LGUI_T(KC_F11),LALT_T(KC_F4),LCTL_T(KC_F5),LSFT_T(KC_F6), KC_SCRL,                                       KC_LEFT,     KC_DOWN,     KC_UP,       KC_RGHT,     CW_TOGG,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_F10,      KC_F1,       KC_F2,       KC_F3,       KC_PAUS,     KC_HOME,              RGB_TOG,     KC_HOME,     KC_PGDN,     KC_PGUP,     KC_END,      KC_INS,      _______,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                                   KC_EQL,      KC_DOT,      KC_MINS,                           KC_NO,       KC_NO,       KC_NO
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),

  [_STKY] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      _______,     _______,     _______,     _______,     _______,     _______,                                        _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,                                          KC_AGIN,     KC_PSTE,     KC_COPY,     KC_CUT,      KC_UNDO,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,  OSM(MOD_LGUI),OSM(MOD_LALT),OSM(MOD_LCTL),OSM(MOD_LSFT), KC_NO,                                        KC_MS_L,     KC_MS_D,     KC_MS_U,     KC_MS_R,     KC_NO,       _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_HOME,              RGB_TOG,     KC_WH_L,     KC_WH_D,     KC_WH_U,     KC_WH_R,     KC_NO,       _______,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                                   KC_NO,       KC_NO,       KC_NO,                             KC_BTN1,     KC_BTN2,     KC_BTN3
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),

  [_META] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                  ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
      _______,     _______,     _______,     _______,     _______,     _______,                                        _______,     _______,     _______,     _______,     _______,     _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,                                          KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                  ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,                                          KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       _______,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐        ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
      _______,     KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_NO,       KC_HOME,              RGB_TOG,     KC_NO,       KC_NO,       DF(_ISSAC),  DF(_TAP),    DF(_BASE),   _______,
  //└────────────┴────────────┴────────────┴─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┘        └─────┬──────┴─────┬──────┴─────┬──────┴─────┬──────┴────────────┴────────────┴────────────┘
                                                   KC_NO,       KC_NO,       KC_NO,                             KC_NO,       KC_NO,       KC_NO
                                              // └────────────┴────────────┴────────────┘                     └────────────┴────────────┴────────────┘
  ),
};

/*
bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        case QWERTY:
            if (record->event.pressed) {
                set_single_persistent_default_layer(_QWERTY);
            }
            return false;
            break;
        case LOWER:
            if (record->event.pressed) {
                layer_on(_LOWER);
                update_tri_layer(_LOWER, _RAISE, _ADJUST);
            } else {
                layer_off(_LOWER);
                update_tri_layer(_LOWER, _RAISE, _ADJUST);
            }
            return false;
            break;
        case RAISE:
            if (record->event.pressed) {
                layer_on(_RAISE);
                update_tri_layer(_LOWER, _RAISE, _ADJUST);
            } else {
                layer_off(_RAISE);
                update_tri_layer(_LOWER, _RAISE, _ADJUST);
            }
            return false;
            break;
        case ADJUST:
            if (record->event.pressed) {
                layer_on(_ADJUST);
            } else {
                layer_off(_ADJUST);
            }
            return false;
            break;
    }
    return true;
}
*/

/*
uint8_t selected_layer = 0;
void encoder_update_user(uint8_t index, bool clockwise) {
   if (index == 0) {
      if (clockwise) {
         tap_code(KC_VOLU);
      } else {
         tap_code(KC_VOLD);
      }
   } else if (index == 1) {
      if (!clockwise && selected_layer  < 10) {
         selected_layer ++;
      } else if (clockwise && selected_layer  > 0){
         selected_layer --;
      }
      tap_code(DF(selected_layer));
      */
/*
  if (clockwise) {
      if(selected_layer < num_def_layers - 1)
         selected_layer++;
      else
         selected_layer = 0;
  } else if (!clockwise) {
      if(selected_layer > 0)
         selected_layer--;
      else
         selected_layer = num_def_layers - 1;
  }*/
/*
}
}
*/
uint8_t selected_layer = 0;
uint8_t num_def_layers = 2;
bool    encoder_update_user(uint8_t index, bool clockwise) {
    switch (index) {
        case 0:
            if (clockwise) {
                tap_code(KC_VOLU);
            } else {
                tap_code(KC_VOLD);
            }
            break;
        case 1:
            if (clockwise) {
                if (selected_layer < num_def_layers - 1)
                    selected_layer++;
                else
                    selected_layer = 0;
            } else if (!clockwise) {
                if (selected_layer > 0)
                    selected_layer--;
                else
                    selected_layer = num_def_layers - 1;
            }
            layer_clear();
            layer_on(selected_layer);
            break;
    }
    return false;
}

/*
led_config_t g_led_config = { {
    // Key Matrix to LED Index
    // Left Half
    { 0, 1, 2, 3, 4, 5 },
    { 11, 10, 9, 8, 7, 6 },
    { 12, 13, 14, 15, 16, 17 },
    { 23, 22, 21, 20, 19, 18 },
    { NO_LED, NO_LED, 24, 25, 26, 27 },
    // Right Half
    { 34, 35, 36, 37, 38, 39 },
    { 45, 44, 43, 42, 41, 40 },
    { 46, 47, 48, 49, 50, 51 },
    { 57, 56, 55, 54, 53, 52 },
    { NO_LED, NO_LED, 58, 59, 60, 61 }
}, {
    // LED Index to Physical Position
    // Left Half
    { 0, 5 }, { 16, 5 }, { 32, 2 }, { 48, 0 }, { 64, 2 }, { 80, 3 },
    { 80, 17 }, { 64, 15 }, { 48, 13 }, { 32, 15 }, { 16, 18 }, { 0, 18 },
    { 0, 32 }, { 16, 32 }, { 32, 28 }, { 48, 27 }, { 64, 28 }, { 80, 30 },
    { 80, 43 }, { 64, 42 }, { 48, 40 }, { 32, 42 }, { 16, 45 }, { 0, 45 },
    { 56, 47 }, { 72, 58 }, { 90, 64 }, { 98, 52 },
    { 80, 58 }, { 40, 50 }, { 8, 43 }, { 8, 5 }, { 40, 1 }, { 72, 3 },
    // Right Half
    { 224, 5 }, { 208, 5 }, { 192, 2 }, { 176, 0 }, { 160, 2 }, { 144, 3 },
    { 144, 18 }, { 160, 18 }, { 176, 15 }, { 192, 13 }, { 208, 15 }, { 224, 17 },
    { 224, 32 }, { 208, 32 }, { 192, 28 }, { 176, 27 }, { 160, 28 }, { 144, 30 },
    { 144, 45 }, { 160, 45 }, { 176, 42 }, { 192, 40 }, { 208, 42 }, { 224, 43 },
    { 168, 47 }, { 152, 58 }, { 134, 64 }, { 126, 52 },
    { 144, 58 }, { 184, 50 }, { 216, 43 }, { 216, 5 }, { 184, 1 }, { 152, 3 }
}, {
    // LED Index to Flag
    // Left Half
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4, 4,
          4, 4, 4, 4,
    2, 2, 2, 2, 2, 2,
    // Right Half
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4, 4,
    4, 4, 4, 4,
    2, 2, 2, 2, 2, 2

} };
*/
